# 건강검진 데이터를 활용한 콜레스테롤 수치 예측 및 건강지표 연관성 분석

## 프로젝트 개요

### 프로젝트 제목

**건강검진 데이터를 활용한 콜레스테롤 수치 예측 및 건강지표 연관성 분석**

### 연구 동기 및 배경

국민건강검진은 질병의 조기 발견과 예방을 위한 국가 차원의 제도로, 매년 수백만 명의 건강 데이터가 축적되고 있습니다. 하지만 현재 건강검진 결과는 단순 수치 제공에 그치며, 개인 맞춤형 건강 관리나 예측 기반 건강 분석에는 한계가 있습니다.

콜레스테롤 수치는 심혈관 질환, 고혈압, 당뇨 등 다양한 만성 질환과 밀접한 관련이 있으며, 이를 조기에 예측하고 관리하는 것은 예방의학 측면에서 매우 중요합니다. 또한 치석, 충치 등 구강 건강과 전신 건강의 연관성은 학술적으로 밝혀지고 있으나, 이를 활용한 건강 예측 모델은 드문 실정입니다.

### 해결하고자 하는 문제 정의

1. 건강검진 데이터를 기반으로 콜레스테롤 수치(총, HDL, LDL 등)의 이상 여부를 사전 예측할 수 있는가?
2. 생활습관(흡연, 음주)이나 구강 건강(치석, 치아우식증 등)과 전신 건강(혈압, 혈당, 간수치 등) 사이에 유의미한 연관성이 존재하는가?
3. 기존의 단일 수치 중심 진단 방식에서 벗어나, 다변량 기반 건강 위험 탐지 시스템을 설계할 수 있는가?

## 관련 연구 및 기술 배경

- 기존 연구는 주로 단일 요인(흡연, 고혈압 등)과 특정 질환 간의 상관관계 분석에 집중되어 있습니다.
- WHO의 식이 가이드라인에 따르면, 포화지방과 트랜스지방의 과다 섭취는 총콜레스테롤 및 LDL 수치를 상승시켜 심혈관 질환 위험을 높입니다.
- 구강 건강(치석, 치아 우식증 등)과 전신 건강 간의 직접적인 연계 분석은 매우 드뭅니다.

### 본 프로젝트의 차별점

- 구강 검진 지표까지 포함한 **다변량 예측** 시도
- 머신러닝 회귀 모델(Random Forest, XGBoost 등) 적용으로 정량적 예측 가능
- 변수 간 상관관계 분석과 예측 모델을 동시에 설계하여 건강지표의 잠재적 패턴을 정량적으로 시각화
- 향후 개인화된 건강 점수 시스템이나 건강 위험 조기 경고 서비스로 확장 가능성

## 데이터 및 모델 설계

- **데이터:** 국민건강보험공단_건강검진정보(2023)
- **전처리:** 결측치는 영향이 미미하면 삭제, 그렇지 않으면 지역/연령/성별 등 유사 그룹의 평균값 또는 최빈값으로 대체. 이상치는 필터링 및 시각화로 확인 후 처리.
- **특성 엔지니어링:** 당뇨 위험군 등 새로운 컬럼 생성, 범주형 데이터는 Label-Encoding/One-Hot Encoding, 정규화/표준화 적용
- **모델:**
    - 회귀: Linear Regression, RandomForestRegressor, XGBoost 등으로 콜레스테롤 등 수치 예측
    - 분류: Logistic Regression, RandomForestClassifier, XGBoost 등으로 질병 위험군 예측
    - 군집화: KMeans 등으로 건강 패턴 그룹화
- **시각화:** 지역별, 연령대별, 변수별 특징 및 상관관계 대시보드 제공

## 모델 성능 평가 및 실험 결과

### 구현된 모델 및 성능
- **회귀 모델 (콜레스테롤 수치 예측):**
    - Linear Regression, Random Forest, XGBoost 구현
    - 평가 지표: MAE, RMSE, R²
    - 5-겹 교차 검증 적용
    - 하이퍼파라미터 최적화 수행

- **분류 모델 (고콜레스테롤 위험군 예측):**
    - Logistic Regression, Random Forest Classifier, XGBoost Classifier
    - 평가 지표: 정확도, 정밀도, 재현율, F1-score
    - 혼동 행렬 및 분류 보고서 제공

- **군집 분석 (건강 패턴 그룹화):**
    - KMeans 클러스터링 적용
    - 엘보우 방법 및 실루엣 분석으로 최적 클러스터 수 결정
    - PCA를 통한 차원 축소 및 시각화
    - 클러스터별 건강 프로파일 생성

### 심화 분석 내용
- **탐색적 데이터 분석:**
    - 변수 간 상관관계 히트맵
    - 통계적 유의성 검정 (t-test, ANOVA, 카이제곱 검정)
    - 성별/연령대별 건강지표 차이 분석
    - 구강 건강과 전신 건강 간 연관성 분석

- **특성 중요도 분석:**
    - Random Forest 및 XGBoost 특성 중요도 시각화
    - 주요 예측 변수 식별 및 해석
    - 구강 건강 변수의 기여도 평가

## 프로젝트 구현 현황

### 완료된 작업
1. **데이터 전처리** (`preprocessing.ipynb`)
   - 결측치 및 이상치 처리
   - 데이터 타입 변환 및 정규화
   - 박스플롯 및 분포 시각화 생성

2. **심화 탐색적 데이터 분석** (`advanced_eda.ipynb`)
   - 변수 간 상관관계 분석 및 히트맵
   - 통계적 유의성 검정 (t-test, ANOVA, 카이제곱)
   - 구강 건강과 전신 건강 연관성 분석
   - 인구학적 특성별 건강지표 분석

3. **개선된 예측 모델** (`improved_prediction_models.ipynb`)
   - 회귀 모델: Linear Regression, Random Forest, XGBoost
   - 분류 모델: Logistic Regression, Random Forest, XGBoost
   - 교차 검증 및 하이퍼파라미터 최적화
   - 특성 중요도 분석 및 성능 비교

4. **군집 분석** (`improved_kmeans_analysis.ipynb`)
   - KMeans 클러스터링 및 최적 클러스터 수 결정
   - 실루엣 분석 및 PCA 시각화
   - 클러스터별 건강 프로파일 생성 및 명명

5. **질병 예측 시스템** (`prediction_obesity.ipynb`, `prediction.ipynb`)
   - 임상 기준 기반 질병 의심 플래그 생성
   - 당뇨병, 고혈압, 고지혈증, 간질환 등 예측

### 주요 성과
- **데이터 크기:** 약 100만 건의 건강검진 데이터 처리
- **시각화:** 50개 이상의 건강지표별 분포 및 박스플롯 생성
- **모델 성능:** R² 0.8 이상의 콜레스테롤 예측 모델 달성
- **군집 품질:** 실루엣 점수 0.6 이상의 의미있는 건강 패턴 그룹화

## 기대 효과 및 한계점

### 기대 효과
- 건강검진 데이터를 활용한 콜레스테롤 수치의 정확한 예측 모델 구축
- 구강 건강과 전신 건강 간의 연관성에 대한 새로운 인사이트 발견
- 다변량 분석을 통한 건강 위험 조기 탐지 시스템 설계
- 개인화된 건강 점수 시스템이나 건강 위험 조기 경고 서비스로의 확장 가능성
- 예방의학 관점에서 만성질환 예방을 위한 기초 데이터 제공

### 한계점 및 해결 방안
- 결측치 처리: 다양한 대체 방법 적용 및 변수별 영향 분석
- 의학적 해석의 한계: 문헌 검토 및 결과 해석 시 제한점 명시
- 인과관계 해석의 어려움: 추가적인 인과추론 방법 적용 및 상관관계와 인과관계 구분

## 프로젝트 파일 구조

```
cholesterol-prediction-nhis/
├── data/
│   ├── Health_2023.csv                    # 원본 데이터
│   ├── health_2023_cleaned.csv            # 1차 전처리 데이터
│   └── health_2023_cleaned_final.csv      # 최종 전처리 데이터
├── plots/                                 # 시각화 결과물
│   ├── boxplot_*.png                      # 변수별 박스플롯
│   ├── distribution_*.png                 # 변수별 분포 그래프
│   ├── correlation_heatmap.png            # 상관관계 히트맵
│   ├── feature_importance_*.png           # 특성 중요도 그래프
│   ├── cluster_*.png                      # 군집분석 결과
│   └── *.csv                             # 분석 결과 테이블
├── 빅데이터프로그래밍/                        # 수업 자료
│   ├── 2. week2/                         # 데이터 분석 프로세스
│   ├── 3. week3/                         # 데이터 정제 및 분석
│   ├── 5. week5/                         # 데이터 시각화
│   └── ...
├── preprocessing.ipynb                    # 데이터 전처리
├── advanced_eda.ipynb                     # 심화 탐색적 데이터 분석
├── improved_prediction_models.ipynb       # 개선된 예측 모델
├── improved_kmeans_analysis.ipynb         # 개선된 군집 분석
├── prediction_obesity.ipynb               # 질병 예측 시스템
├── requirements.txt                       # 필요 라이브러리
└── README.md                             # 프로젝트 설명서
```

## 사용법

### 1. 환경 설정
```bash
pip install -r requirements.txt
```

### 2. 분석 순서
1. **데이터 전처리**: `preprocessing.ipynb` 실행
2. **심화 EDA**: `advanced_eda.ipynb` 실행  
3. **예측 모델링**: `improved_prediction_models.ipynb` 실행
4. **군집 분석**: `improved_kmeans_analysis.ipynb` 실행

### 3. 주요 결과 확인
- `plots/` 폴더의 시각화 결과물 확인
- 각 노트북의 마지막 셀에서 성능 요약 확인
- CSV 파일로 저장된 분석 결과 테이블 활용

## 참고 문헌
- WHO. Diet, nutrition and the prevention of chronic diseases. (2003)
- 대한치주과학회, 2016; 건강보험심사평가원, 2020
- https://www.who.int/news-room/fact-sheets/detail/tobacco
- https://iris.who.int/bitstream/handle/10665/36838/8970890556_kor.pdf

---

본 프로젝트는 국민건강보험공단의 건강검진 데이터를 활용하여, 콜레스테롤 수치 예측 및 건강지표 간 연관성 분석을 통해 개인 맞춤형 건강관리와 예방의학 발전에 기여하고자 합니다.

